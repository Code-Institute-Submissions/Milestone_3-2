{% extends 'admin/admin_base.html'%}

{% block content %}

<div class="mdl-grid ui-tables">

    <div class="mdl-cell mdl-cell--12-col-desktop mdl-cell--12-col-tablet mdl-cell--4-col-phone">
        <div class="mdl-card mdl-shadow--2dp">
            <div class="mdl-card__title">
                <h1 class="mdl-card__title-text">Multiply Settings - <strong>&nbsp;{{ user.name }}</strong></h1>

            </div>
            <div class="mdl-card__supporting-text no-padding">
                <form method="POST" action="{{ url_for('update_settings') }}" name="update_form" id="update_form">
                    <table class="mdl-data-table mdl-js-data-table">
                        <thead>
                            <tr>

                                <th class="mdl-data-table__cell--non-numeric">
                                    <input type="hidden" value="{{ user._id }}" name="user_id" id="user_id">
                                    <input type="hidden" value="{{ user.name }}" name="user_name" id="user_name">
                                    Enabled</th>
                                <th class="mdl-data-table__cell--non-numeric">Can be Inverted</th>
                                <th class="mdl-data-table__cell--non-numeric">Answer Type</th>
                                <th class="mdl-data-table__cell--non-numeric">Nr of retries</th>
                                <th class="mdl-data-table__cell--non-numeric">Auto-submit when correct</th>
                                <th class="mdl-data-table__cell--non-numeric">Hint Enabled</th>
                                <th class="mdl-data-table__cell--non-numeric">Nr of Exercises (0=infinite)
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="mdl-data-table__cell--non-numeric">
                                    <label
                                        class="mdl-switch mdl-js-switch mdl-js-ripple-effect switch--colored-red mdl-js-ripple-effect"
                                        for="switch-enabled">
                                        <input type="checkbox" id="switch-enabled" class="mdl-switch__input"
                                            name="enabled" {% if user.mult_opt_enabled %} checked="" {% endif %}>

                                        <div class="mdl-switch__track"></div>
                                        <div class="mdl-switch__thumb"><span class="mdl-switch__focus-helper"></span>
                                    </label>
                                </td>
                                <td class="mdl-data-table__cell--non-numeric">
                                    <label
                                        class="mdl-switch mdl-js-switch mdl-js-ripple-effect switch--colored-orange mdl-js-ripple-effect"
                                        for="switch-inverted">
                                        <input type="checkbox" id="switch-inverted" class="mdl-switch__input"
                                            name="inverted" {% if user.mult_opt_can_be_inverted %} checked=""
                                            {% endif %}>
                                        <div class="mdl-switch__track"></div>
                                        <div class="mdl-switch__thumb"><span class="mdl-switch__focus-helper"></span>
                                        </div>

                                    </label>
                                </td>
                                <td class="mdl-data-table__cell--non-numeric">
                                    <label
                                        class="mdl-radio mdl-js-radio mdl-js-ripple-effect radio--colored-orange mdl-js-ripple is-checked"
                                        for="option-1">
                                        <input type="radio" id="option-1" class="mdl-radio__button" name="mult_opt"
                                            value="1" {% if (user.mult_opt_answer_type == 1) %} checked="" {% endif %}>
                                        <span class="mdl-radio__label">InputBox</span>
                                        <span class="mdl-radio__outer-circle"></span>
                                        <span class="mdl-radio__inner-circle"></span>
                                    </label>
                                    <span class="ml15"></span>
                                    <label
                                        class="mdl-radio mdl-js-radio mdl-js-ripple-effect radio--colored-orange mdl-js-ripple is-checked"
                                        for="option-2">
                                        <input type="radio" id="option-2" class="mdl-radio__button" name="mult_opt"
                                            value="3" {% if user.mult_opt_answer_type == 3 %} checked="" {% endif %}>
                                        <span class="mdl-radio__label">3 Options</span>
                                        <span class="mdl-radio__outer-circle"></span>
                                        <span class="mdl-radio__inner-circle"></span>
                                        </span>
                                    </label>
                                    <span class="ml15"></span>
                                    <label
                                        class="mdl-radio mdl-js-radio mdl-js-ripple-effect radio--colored-orange mdl-js-ripple is-checked"
                                        for="option-3">
                                        <input type="radio" id="option-3" class="mdl-radio__button" name="mult_opt"
                                            value="5" {% if user.mult_opt_answer_type == 5 %} checked="" {% endif %}>
                                        <span class="mdl-radio__label">5 Options</span>
                                        <span class="mdl-radio__outer-circle"></span>
                                        <span class="mdl-radio__inner-circle"></span>
                                    </label>
                                </td>
                                <td class="mdl-data-table__cell--non-numeric">
                                    <label
                                        class="mdl-radio mdl-js-radio mdl-js-ripple-effect radio--colored-orange mdl-js-ripple is-checked"
                                        for="option-1a">
                                        <input type="radio" id="option-1a" class="mdl-radio__button"
                                            name="mult_retry_opt" value="1" {% if (user.mult_opt_retry_nr == 1) %}
                                            checked="" {% endif %}>
                                        <span class="mdl-radio__label">One</span>
                                        <span class="mdl-radio__outer-circle"></span>
                                        <span class="mdl-radio__inner-circle"></span>
                                    </label>
                                    <span class="ml15"></span>
                                    <label
                                        class="mdl-radio mdl-js-radio mdl-js-ripple-effect radio--colored-orange mdl-js-ripple is-checked"
                                        for="option-2a">
                                        <input type="radio" id="option-2a" class="mdl-radio__button"
                                            name="mult_retry_opt" value="2" {% if user.mult_opt_retry_nr == 2 %}
                                            checked="" {% endif %}>
                                        <span class="mdl-radio__label">Two</span>
                                        <span class="mdl-radio__outer-circle"></span>
                                        <span class="mdl-radio__inner-circle"></span>
                                    </label>
                                    <span class="ml15"></span>
                                    <label
                                        class="mdl-radio mdl-js-radio mdl-js-ripple-effect radio--colored-orange mdl-js-ripple is-checked"
                                        for="option-3a">
                                        <input type="radio" id="option-3a" class="mdl-radio__button"
                                            name="mult_retry_opt" value="3" {% if user.mult_opt_retry_nr == 3 %}
                                            checked="" {% endif %}>
                                        <span class="mdl-radio__label">Three</span>
                                        <span class="mdl-radio__outer-circle"></span>
                                        <span class="mdl-radio__inner-circle"></span>
                                    </label>
                                </td>
                                <td class="mdl-data-table__cell--non-numeric">
                                    <label
                                    class="mdl-switch mdl-js-switch mdl-js-ripple-effect switch--colored-red mdl-js-ripple-effect"
                                    for="auto_submit">
                                    <input type="checkbox" id="auto_submit" class="mdl-switch__input" name="auto_submit"
                                        {% if user.mult_opt_auto_submit %} checked="" {% endif %}>

                                    <div class="mdl-switch__track"></div>
                                    <div class="mdl-switch__thumb"><span class="mdl-switch__focus-helper"></span>
                                </label>

                                </td>

                                <td class="mdl-data-table__cell--non-numeric">

                                    <label
                                        class="mdl-switch mdl-js-switch mdl-js-ripple-effect switch--colored-red mdl-js-ripple-effect"
                                        for="show_hint">
                                        <input type="checkbox" id="show_hint" class="mdl-switch__input" name="show_hint"
                                            {% if user.mult_opt_show_hint %} checked="" {% endif %}>

                                        <div class="mdl-switch__track"></div>
                                        <div class="mdl-switch__thumb"><span class="mdl-switch__focus-helper"></span>
                                    </label>
                                </td>


                                <td class="mdl-data-table__cell--non-numeric">
                                    <p style="width: 150px; margin-bottom: -5px;">
                                        <input class="mdl-slider mdl-js-slider slider--colored-orange" type="range"
                                            min="0" max="100" value="{{ user.mult_opt_exercise_nr }}" tabindex="0"
                                            id="slider-tool" name="ex_nr"></p>
                                    <span class="mdl-badge badge--colored-orange badge-slider" id="badge1"
                                        data-badge="{{ user.mult_opt_exercise_nr }}"></span>
                                    <span class="mdl-tooltip mdl-tooltip--large" for="slider-tool"
                                        id="tooltip">{{ user.mult_opt_exercise_nr }}</span>

                                </td>

                            </tr>


                        </tbody>

                    </table>

                    <table class="mdl-data-table mdl-js-data-table">
                        <tbody>
                            <tr>

                                {% for nr in user.mult_opt_nr %}
                                <td class="mdl-data-table__cell--non-numeric"><strong>{{ nr }}</strong></td>
                                {% endfor %}
                            </tr>
                            <tr>

                                {% for nr in user.mult_opt_nr %}
                                <td class="mdl-data-table__cell--non-numeric">

                                    <label
                                        class="mdl-switch mdl-js-switch mdl-js-ripple-effect switch--colored-green mdl-js-ripple-effect"
                                        for="switch-{{ nr }}">
                                        <input type="checkbox" id="switch-{{ nr }}" name="switch-{{ nr }}"
                                            class="mdl-switch__input" {% if user.mult_opt_nr[nr] %} checked=""
                                            {% endif %} value="on">

                                        <div class="mdl-switch__track"></div>
                                        <div class="mdl-switch__thumb"><span class="mdl-switch__focus-helper"></span>
                                        </div>

                                    </label>
                                </td>
                                {% endfor %}
                            </tr>
                            <tr>
                                <td colspan="14" style="text-align: center;">
                                    <button
                                        class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-green"
                                        id="update-form">
                                        <i class="material-icons">create</i>
                                        Save Settings

                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </form>
            </div>
        </div>
    </div>

</div>
<div id="demo-toast-example" class="mdl-js-snackbar mdl-snackbar">
    <div class="mdl-snackbar__text"></div>
    <button class="mdl-snackbar__action" type="button"></button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
    const slider = document.querySelector('#slider-tool');
    slider.addEventListener("input", function () {
        document.getElementById("tooltip").textContent = slider.value;
        document.getElementById("badge1").setAttribute('data-badge', slider.value);

    }, false);


    (function () {
        'use strict';
        window['counter'] = 0;
        var snackbarContainer = document.querySelector('#demo-toast-example');
        var showToastButton = document.querySelector('#update-form');
        showToastButton.addEventListener('click', function (event) {
            'use strict';
            var data = { message: 'Update Settings {{ user.name }} - times (' + ++counter + ')' };
            snackbarContainer.MaterialSnackbar.showSnackbar(data);

            var str = $("#update_form").serialize();
            event.preventDefault();
            console.log(str);
            $.post("{{ url_for('update_settings') }}", { str })
                .done(function (data) {
                    console.log("Response Was: " + data);
                });
        });
    }());

</script>


<script>

</script>
{% endblock %}